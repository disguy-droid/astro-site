---
import { Image } from "@astrojs/image/components";

export interface CardProps {
  urls: {
    regular: string;
    small: string;
    thumb: string;
  };
  links: {
    self: string;
    download: string;
  };
  user: {
    id: string;
    name: string;
    username: string;
    profile_image: {
      small: string;
      medium: string;
      large: string;
    };
  };
  width: number;
  height: number;
}

const { urls, user, width, height, links } = Astro.props as CardProps;
---

<div class="w-full rounded-md overflow-hidden">
  <div class="relative group cursor-pointer group">
    <a href="#">
      <Image
        width={1080}
        aspectRatio={`${width}:${height}`}
        src={urls.regular}
        alt={"unsplash-image"}
        class="group-hover:scale-105 transition-all ease-in-out duration-700"
        format={"webp"}
        quality={50}
      />
    </a>
    <div
      class="absolute bottom-0 flex justify-between w-full items-center py-4 px-4"
    >
      <a
        href={`/users/${user.username}`}
        class="group-hover:flex items-center space-x-4 hidden group-hover:transition-all duration-300 ease-in-out group-hover:bg-zinc-900/40 backdrop-blur-md px-2 py-2 rounded-md"
      >
        <div class="w-8 h-8 rounded-md overflow-hidden">
          <img
            src={user.profile_image.medium}
            alt=""
          />
        </div>
        <p class="font-medium text-base hover:text-zinc-300">
          {user.name}
        </p>
      </a>

      <a
        href={links.download}
        download
        target="_blank"
      >
        <button
          class="group-hover:flex items-center space-x-4 hidden group-hover:transition-all duration-300 ease-in-out group-hover:bg-zinc-900/40 backdrop-blur-md px-4 py-4 rounded-md"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-download w-4 h-4"
            viewBox="0 0 16 16"
          >
            <path
              d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"
            ></path>
            <path
              d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"
            ></path>
          </svg>
        </button>
      </a>
    </div>
  </div>
</div>
