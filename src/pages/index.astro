---
import Layout from "../layouts/Layout.astro";
import Cards from "../components/Cards.astro";
import type { ImageDatas } from "../interfaces/interfaces";

const API_KEY = import.meta.env.TOP_SECRET;
let imageDatas = [] as ImageDatas[];

let response = await fetch(
  `https://api.unsplash.com/photos/?client_id=${API_KEY}`
);
let data = await response.json();

imageDatas = data;
---

<Layout title="Photos">
  <div
    class="columns-1 md:columns-2 lg:columns-3 break-before-avoid space-y-4 inline-block text-zinc-100 py-8"
  >
    {
      imageDatas?.map(({ urls, user, width, height, links }) => (
        <Cards
          urls={urls}
          user={user}
          width={width}
          height={height}
          links={links}
        />
      ))
    }
  </div>
</Layout>
